<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>态势计算</title>
    <!-- 引入 layui.css -->
    <link rel="stylesheet" href="//unpkg.com/layui@2.6.8/dist/css/layui.css"/>
    <!-- 引入 layui.js -->
    <script src="//unpkg.com/layui@2.6.8/dist/layui.js"></script>
    <!-- 引入 jquery.js -->
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.js"></script>

    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
          <link rel="stylesheet" href="./layuiadmin/layui/css/layui.css" media="all">
          <link rel="stylesheet" href="./layuiadmin/style/admin.css" media="all">
          <link rel="shortcut icon" href="./images/favicon.ico">>

</head>
<body>
  <div class="layui-layout layui-layout-admin">
    <div class="layui-header">
      <div class="layui-logo layui-hide-xs layui-bg-black">layout demo</div>
      <!-- 头部区域（可配合layui 已有的水平导航） -->
      <ul class="layui-nav layui-layout-left">
        <!-- 移动端显示 -->
        <li class="layui-nav-item layui-show-xs-inline-block layui-hide-sm" lay-header-event="menuLeft">
          <i class="layui-icon layui-icon-spread-left"></i>
        </li>
        
        <li class="layui-nav-item layui-hide-xs"><a href="">nav 1</a></li>
        <li class="layui-nav-item layui-hide-xs"><a href="">nav 2</a></li>
        <li class="layui-nav-item layui-hide-xs"><a href="">nav 3</a></li>
        <li class="layui-nav-item">
          <a href="javascript:;">nav groups</a>
          <dl class="layui-nav-child">
            <dd><a href="">menu 11</a></dd>
            <dd><a href="">menu 22</a></dd>
            <dd><a href="">menu 33</a></dd>
          </dl>
        </li>
      </ul>
      <ul class="layui-nav layui-layout-right">
        <li class="layui-nav-item layui-hide layui-show-md-inline-block">
          <a href="javascript:;">
            <img src="//tva1.sinaimg.cn/crop.0.0.118.118.180/5db11ff4gw1e77d3nqrv8j203b03cweg.jpg" class="layui-nav-img">
            tester
          </a>
          <dl class="layui-nav-child">
            <dd><a href="">Your Profile</a></dd>
            <dd><a href="">Settings</a></dd>
            <dd><a href="">Sign out</a></dd>
          </dl>
        </li>
        <li class="layui-nav-item" lay-header-event="menuRight" lay-unselect>
          <a href="javascript:;">
            <i class="layui-icon layui-icon-more-vertical"></i>
          </a>
        </li>
      </ul>
    </div>
    
    <div class="layui-side layui-bg-black">
      <div class="layui-side-scroll">
        <!-- 左侧导航区域（可配合layui已有的垂直导航） -->
        <ul class="layui-nav layui-nav-tree" lay-filter="test">
          <li class="layui-nav-item layui-nav-itemed">
            <a class="" href="javascript:;">menu group 1</a>
            <dl class="layui-nav-child">
              <dd><a href="javascript:;">menu 1</a></dd>
              <dd><a href="javascript:;">menu 2</a></dd>
              <dd><a href="javascript:;">menu 3</a></dd>
              <dd><a href="">the links</a></dd>
            </dl>
          </li>
          <li class="layui-nav-item">
            <a href="javascript:;">menu group 2</a>
            <dl class="layui-nav-child">
              <dd><a href="javascript:;">list 1</a></dd>
              <dd><a href="javascript:;">list 2</a></dd>
              <dd><a href="">超链接</a></dd>
            </dl>
          </li>
          <li class="layui-nav-item"><a href="javascript:;">click menu item</a></li>
          <li class="layui-nav-item"><a href="">the links</a></li>
        </ul>
      </div>
    </div>
    
    <div class="layui-body">
      <!-- 内容主体区域 -->
      <div style="padding: 15px;">
        <!-- 内容主体区域 -->
        <div style="border: solid 1px pink; ">
          <!-- 多文件上传 -->
          <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
            <legend>高级应用：制作一个多文件列表</legend>
          </fieldset> 
          <div class="layui-upload">
            <button type="button" class="layui-btn layui-btn-normal" id="testList">选择多文件</button> 
            <div class="layui-upload-list" style="max-width: 1000px;">
              <table class="layui-table">
                <colgroup>
                  <col>
                  <col width="150">
                  <col width="260">
                  <col width="150">
                </colgroup>
                <thead>
                  <tr><th>文件名</th>
                  <th>大小</th>
                  <th>上传进度</th>
                  <th>操作</th>
                </tr></thead>
                <tbody id="demoList"></tbody>
              </table>
            </div>
            <button type="button" class="layui-btn" id="testListAction">开始上传</button>
          </div> 
        </div>


        <br>
        <!-- 表格展示 -->
        <div style="border: solid 1px blue; padding: 15px; ">
          <div class="layui-bg-gray" style="padding: 10px;">


          </div>
      
          <!-- <div class="layui-col-md12"> -->
              <div class="layui-panel" id="tablebox">
                  <table class="layui-hide" id="test"  lay-filter="test"></table>
              </div>
          <!-- </div> -->
      
      

        </div>

      </div>
    </div>

  </div>

   
  


  <!-- 引入 echarts -->
  <script src="https://cdn.jsdelivr.net/npm/echarts@5.1.2/dist/echarts.min.js"></script>
  <!-- 引入 axios -->
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <!-- 引入自定义axios -->
  <script src="../api/myaxios.js"></script>
  <!-- 注意：如果你直接复制所有代码到本地，上述 JS 路径需要改成你本地的 -->
  <script src="./layui/layui.js"></script>
  <!-- 头部导航栏 -->
  <script>
  //JS 
  layui.use(['element', 'layer', 'util'], function(){
    var element = layui.element
    ,layer = layui.layer
    ,util = layui.util
    ,$ = layui.$;
    
    //头部事件
    util.event('lay-header-event', {
      //左侧菜单事件
      menuLeft: function(othis){
        layer.msg('展开左侧菜单的操作', {icon: 0});
      }
      ,menuRight: function(){
        layer.open({
          type: 1
          ,content: '<div style="padding: 15px;">处理右侧面板的操作</div>'
          ,area: ['260px', '100%']
          ,offset: 'rt' //右上角
          ,anim: 5
          ,shadeClose: true
        });
      }
    });
    
  });
  </script>

  <!-- 文档上传 -->
  <script>
  layui.use(['upload', 'element', 'layer'], function(){
    var $ = layui.jquery
    ,upload = layui.upload
    ,element = layui.element
    ,layer = layui.layer;
    
    
    //演示多文件列表
    var uploadListIns = upload.render({
      elem: '#testList'
      ,elemList: $('#demoList') //列表元素对象
      ,url: 'http://192.168.50.17:7788/file/upload' //此处用的是第三方的 http 请求演示，实际使用时改成您自己的上传接口即可。
      ,accept: 'file'
      ,multiple: true
      ,number: 7
      ,auto: false
      ,bindAction: '#testListAction'
      ,choose: function(obj){   
        var that = this;
        var files = this.files = obj.pushFile(); //将每次选择的文件追加到文件队列
        //读取本地文件
        obj.preview(function(index, file, result){
          var tr = $(['<tr id="upload-'+ index +'">'
            ,'<td>'+ file.name +'</td>'
            ,'<td>'+ (file.size/1014).toFixed(1) +'kb</td>'
            ,'<td><div class="layui-progress" lay-filter="progress-demo-'+ index +'"><div class="layui-progress-bar" lay-percent=""></div></div></td>'
            ,'<td>'
              ,'<button class="layui-btn layui-btn-xs demo-reload layui-hide">重传</button>'
              ,'<button class="layui-btn layui-btn-xs layui-btn-danger demo-delete">删除</button>'
            ,'</td>'
          ,'</tr>'].join(''));
          
          //单个重传
          tr.find('.demo-reload').on('click', function(){
            obj.upload(index, file);
          });
          
          //删除
          tr.find('.demo-delete').on('click', function(){
            delete files[index]; //删除对应的文件
            tr.remove();
            uploadListIns.config.elem.next()[0].value = ''; //清空 input file 值，以免删除后出现同名文件不可选
          });
          
          that.elemList.append(tr);
          element.render('progress'); //渲染新加的进度条组件
        });
      }
      ,done: function(res, index, upload){ //成功的回调
        var that = this;
        //if(res.code == 0){ //上传成功
          var tr = that.elemList.find('tr#upload-'+ index)
          ,tds = tr.children();
          tds.eq(3).html(''); //清空操作
          delete this.files[index]; //删除文件队列已经上传成功的文件
          return;
        //}
        this.error(index, upload);
      }
      ,allDone: function(obj){ //多文件上传完毕后的状态回调
        console.log(obj)
      }
      ,error: function(index, upload){ //错误回调
        var that = this;
        var tr = that.elemList.find('tr#upload-'+ index)
        ,tds = tr.children();
        tds.eq(3).find('.demo-reload').removeClass('layui-hide'); //显示重传
      }
      ,progress: function(n, elem, e, index){ //注意：index 参数为 layui 2.6.6 新增
        element.progress('progress-demo-'+ index, n + '%'); //执行进度条。n 即为返回的进度百分比
      }
    });

    
  });
  </script>
  

  <script>

    layui.use(['table', 'layer'], function () {
        var table = layui.table
            , layer = layui.layer;

        // 表格数据渲染
        table.render({
            elem: '#test'
            , url: localStorage.getItem('baseUrl') + '/node/list'
            // 加上satoken,不然请求数据会失败
            ,headers: {satoken: localStorage.getItem("satoken")}
            ,parseData: function(res){ //res 即为原始返回的数据
                return {
                    "code": 0, //解析接口状态
                    "msg": "", //解析提示文本
                    "count": res.count, //解析数据长度
                    "data": res.data //解析数据列表
                };
            }
            , limit: 15
            , title: '上传文件列表'
            , cols: [[
                {type: 'checkbox', fixed: 'left'}
                , {field: 'node.id'
                    , title: 'ID'
                    , templet:function (fileIng){
                        return fileIng.node.id;
                    }
                    ,width: 80, fixed: 'left', unresize: true, sort: true
                }
                , {field: 'node.nodeIp'
                    , title: 'nodeIp'
                    , templet:function (fileIng){
                        return fileIng.node.nodeIp;
                    }
                    , width: 180, edit: 'text'}
                , {field: 'node.nodeMac', title: 'nodeMac'
                    , templet:function (fileIng){
                        return fileIng.node.nodeMac;
                    }
                    , width: 180, edit: 'text'}
                , {field: 'node.nodeVlan', title: 'nodeVlan'
                    , templet:function (fileIng){
                        return fileIng.node.nodeVlan;
                    }
                    , width: 120, edit: 'text'}
                , {field: 'node.nodeName'
                    , title: 'nodeName'
                    , templet:function (fileIng){
                        return fileIng.node.nodeName;
                    }
                    , width: 120, sort: true}
                , {field: 'node.physicalType'
                    , title: 'physicalType'
                    , templet:function (fileIng){
                        return fileIng.node.physicalType;
                    }
                    , width: 120}
                , {field: 'node.logicalType'
                    , title: 'logicalType'
                    , templet:function (fileIng){
                        return fileIng.node.logicalType;
                    }
                    , width: 80, sort: true}
                , {field: 'node.spectrumFloor'
                    , title: 's_Floor'
                    , templet:function (fileIng){
                        return fileIng.node.spectrumFloor;
                    }
                    , width: 50}
            ]]
            , page: true
            , limit: 20
        });


    });

 


</script>
  </body>
</html>


